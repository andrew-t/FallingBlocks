<!DOCTYPE html>
<html>
<head>
    <title>FallingBlocks integration test</title>
    <script src="../../src/game/tetrimino.js"></script>
    <script src="../../src/game/landedBlocksCollection.js"></script>
    <script src="../../src/game/renderer.js"></script>
    <script src="../../src/game/gameAreaRenderer.js"></script>

    <script src="../../src/game/directions.js"></script>
    <script src="../../src/game/rotations.js"></script>

    <script src="../../src/game/transform.js"></script>
    <script src="../../src/game/transformMatrix.js"></script>
    <script src="../../src/game/transformMatrixFactory.js"></script>
    <script src="../../src/game/transformMatrixDefinitionFactory.js"></script>
    <script src="../../src/game/transformVector.js"></script>

    <script src="../../src/util.js"></script>

    <script src="../../src/keyboardInputSource.js"></script>
    <script src="../../src/game/inputListener.js"></script>
</head>
<body>
    <canvas id="MyCanvas" width="500" height="500" tabindex="0"></canvas>

    <script>
        (function () {
            var myCanvas = document.getElementById('MyCanvas'),
                context = myCanvas.getContext('2d'),
                width = myCanvas.offsetWidth,
                height = myCanvas.offsetHeight,
                columns = 15,
                rows = 20,
                spawnAreaRows = 5,
                fallingObjectDefinition = {
                    centreOffset: { x: 1, y: 0 },
                    blockOffsets: [
                        { x: 0, y: 0 },
                        { x: 1, y: 0 },
                        { x: 2, y: 0 },
                        { x: 1, y: 1 }
                    ]},
                gameState = {
                    landedBlocks: fallingBlocks.game.landedBlocksCollection(columns, rows),
                    tetrimino: fallingBlocks.game.tetrimino(fallingObjectDefinition, { x: 7, y: 22 }),
                    score: 0
                },
                colours = {
                    landedBlock: '#333333',
                    background: '#F0F0F0',
                    tetrimino: '#666666'
                },
                renderer = fallingBlocks.game.renderer(context, width, height, gameState, spawnAreaRows, colours);

            gameState.landedBlocks.addLocations([
                { x: 0, y: 0 },
                { x: columns - 1, y: rows - 1 }
            ]);

            gameState.tetrimino.rotate(fallingBlocks.game.rotations.clockwise);

            renderer.render();
        })();
    </script>
</body>
</html>